#!/bin/bash
echo "Domain,Registrant Name,Registrant Org,Registrant Email,Admin Name,Admin Email,Tech Name,Tech Email"; for d in "$@"; do whois "$d" 2>/dev/null | grep -Ei 'Registrant Name:|Registrant Organization:|Registrant Email:|Admin Name:|Admin Email:|Tech Name:|Tech Email:' | sed -E 's/.*Name:/Name:/; s/.*Organization:/Org:/; s/.*Email:/Email:/' | awk '{printf "%s,",$2; for(i=3;i<=NF;i++) printf "%s ",$i; printf ","}' | tr '\n' ',' | sed -e "s/^/$d,/" -e 's/,$//' -e 's/, ,/,/g'; echo; done
